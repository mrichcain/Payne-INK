<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payne Ink Birthday Bash!</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Dark background for a tattoo shop vibe */
            color: #e0e0e0; /* Light grey text */
        }
        /* Custom styles for glowing effect on certain elements */
        .glow-text {
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.7); /* Cyan glow */
        }
        .glow-border {
            box-shadow: 0 0 10px rgba(128, 0, 128, 0.7); /* Purple glow */
        }
        /* Classes for dynamic visibility */
        .hidden-clue {
            display: none; /* Used for toggling clues within active sections or hiding a clue explicitly */
        }
        .initial-hidden {
            display: none; /* Used to hide entire clue sections before countdown expires */
        }
        /* Style for loading indicator */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 2s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-4xl w-full bg-gray-800 rounded-xl shadow-2xl overflow-hidden glow-border p-6 md:p-10 my-8">

        <!-- Countdown Timer Section -->
        <div id="countdownContainer" class="text-center mb-8">
            <h3 class="text-3xl md:text-4xl font-bold text-teal-300 mb-4">Party Countdown!</h3>
            <p id="countdownDisplay" class="text-5xl md:text-6xl font-extrabold text-white glow-text"></p>
            <p class="text-lg text-gray-300 mt-2">Get ready for the Payne Ink Birthday Bash...</p>
        </div>

        <!-- Header Section (Always visible) -->
        <header class="text-center mb-8">
            <h1 class="text-5xl md:text-6xl font-extrabold text-white mb-2 glow-text">
                Payne Ink
            </h1>
            <h2 class="text-3xl md:text-4xl font-semibold text-purple-400 mb-4">
                Kailey & Zak's Birthday Bash!
            </h2>
            <p class="text-xl md:text-2xl text-gray-300">
                You're invited to the hottest party of the year!
            </p>
        </header>

        <!-- Party Details Section (Always visible) -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">Event Details</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg">
                <div class="bg-gray-700 p-4 rounded-lg shadow-inner">
                    <p><span class="font-semibold text-purple-300">Date:</span> June 21st</p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg shadow-inner">
                    <p><span class="font-semibold text-purple-300">Time:</span> 7:00 PM 'til late!</p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg shadow-inner">
                    <p><span class="font-semibold text-purple-300">Location:</span> Payne Ink Tattoo Studio</p>
                    <p class="text-sm text-gray-400">242 Summit Dr, Mocksville</p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg shadow-inner">
                    <p><span class="font-semibold text-purple-300">Dress Code:</span> Flashy, Fun, and Ready to Ink!</p>
                </div>
            </div>
        </section>

        <!-- Attractions Section (Always visible) -->
        <section class="mb-10">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 text-center mb-4">What's Happening?</h3>
            <ul class="list-disc list-inside text-lg text-gray-300 space-y-2 px-4 md:px-0">
                <li class="bg-gray-700 p-2 rounded-lg shadow-inner">Live Tattoo Design Contest (Guest Judge: Tatiana Vale!)</li>
                <li class="bg-gray-700 p-2 rounded-lg shadow-inner">Blacklight Ink Demos <span class="text-sm text-gray-400">(with Zak "The Shop Heartthrob")</span></li>
                <li class="bg-gray-700 p-2 rounded-lg shadow-inner">Live DJ spinning beats all night <span class="text-sm text-gray-400">(with Melissa "The Rhythmic Regulator")</span></li>
                <li class="bg-gray-700 p-2 rounded-lg shadow-inner">Piercing Booths & Custom Flash Art <span class="text-sm text-gray-400">(run by Nate "The Steady Hand")</span></li>
                <li class="bg-gray-700 p-2 rounded-lg shadow-inner">Delicious Snacks & Refreshments</li>
            </ul>
        </section>

        <!-- New: Contest & Awards Section -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">Contest & Awards Info!</h3>
            <div class="bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-purple-500">
                <p class="text-lg text-gray-300 mb-4">
                    Get ready to show off your creativity and flair!
                </p>
                <ul class="list-disc list-inside text-lg text-gray-300 space-y-3 px-4 md:px-0">
                    <li class="p-2 rounded-lg shadow-inner bg-gray-800">
                        <span class="font-semibold text-purple-300">Best Tattoo Design:</span> Bring your *original* tattoo design! It will be put up for a vote by all party-goers. The most innovative and captivating design wins!
                    </li>
                    <li class="p-2 rounded-lg shadow-inner bg-gray-800">
                        <span class="font-semibold text-purple-300">Best Costume:</span> Come dressed to impress in your most flashy, fun, and ink-ready attire. Your fellow guests will vote for the most outstanding costume of the night!
                    </li>
                    <li class="p-2 rounded-lg shadow-inner bg-gray-800">
                        <span class="font-semibold text-purple-300">Best Actor:</span> Show off your improv skills! The player who embodies their character most convincingly throughout the mystery will be crowned Best Actor.
                    </li>
                </ul>
                <p class="text-lg text-gray-300 mt-4">
                    Votes will be cast towards the end of the night. Good luck, and bring your A-game!
                </p>
            </div>
        </section>

        <!-- Player Character Cards Section (New) -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">Your Character Card</h3>
            <p class="text-lg text-gray-300 mb-4">
                Enter your unique character password to reveal your role and secrets.
            </p>
            <div class="flex flex-col items-center">
                <input type="password" id="characterPasswordInput" placeholder="Your Character Password"
                       class="px-4 py-2 mb-4 rounded-lg bg-gray-700 text-white border border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-400 w-full max-w-xs">
                <button onclick="unlockCharacterCard()"
                        class="px-6 py-3 bg-purple-600 text-white font-bold rounded-lg shadow-lg hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105">
                    Reveal My Card
                </button>
            </div>
            <p id="characterPasswordError" class="text-red-500 mt-4 hidden-clue">Incorrect password for any character. Please try again.</p>

            <!-- Individual Character Cards - Initially Hidden -->
            <div id="characterCardsContainer" class="mt-8 text-left">

                <!-- Kailey's Card -->
                <div id="card_Kailey" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Kailey "The Birthday Artist"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Co-Birthday Celebrant, Aspiring Tattoo Artist</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Enthusiastic, creative, a bit competitive. Deeply passionate about her art. She seeks genuine artistic recognition and despises unoriginality.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** As a young artist, Kailey greatly admires Tatiana Vale and wants nothing more than to impress her with her original contest design. She hoped Tatiana's visit would be a huge break.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She has growing suspicions about certain "original" designs appearing in the contest, finding one strikingly similar to an early concept of **Lilly's "The Phoenix Plagiarist"** that she herself had helped critique.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Did she resent Tatiana's potential overlooking of her truly original work, or was she worried about *any* accusations of plagiarism (real or perceived) disrupting her big night, especially with Tatiana's reputation?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Kailey" about your **excitement for the design contest** and a subtle hint about **hoping everyone's work is truly original.**
                    </div>
                </div>

                <!-- Zak's Card -->
                <div id="card_Zak" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Zak "The Shop Heartthrob"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Co-Birthday Celebrant, Tattoo Artist at Payne Ink, Blacklight Ink Demonstrator</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Charismatic, a little rebellious, but fiercely protective of his friends and the shop's reputation. He carries a relaxed demeanor, but has a hidden past of shady dealings in the tattoo world.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Tatiana was known for exposing "rats" and shady dealings in shops, and Zak has some skeletons in his closet regarding past questionable ink supply sources that he's tried to put behind him. He feared Tatiana might dig them up.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He had a hushed, intense conversation with **James "The Business Brain"** earlier tonight about "cleaning up the shop's image" before Tatiana's judging.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** What past secret was Zak trying to keep hidden from the public eye and Tatiana's scrutinizing gaze? Would he go to great lengths to prevent its exposure, especially if it involved his business partner or mentor?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Zak" about being **pumped for the blacklight demos** and a subtle remark about **tonight being about clean reputations and good vibes.**
                    </div>
                </div>

                <!-- Anne's Card -->
                <div id="card_Anne" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Anne "The Shadowed Ink"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Longtime Friend of Kailey's, Tattoo Apprentice</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Quiet, observant, but fiercely protective of her professional reputation. She prefers to keep a low profile but can be surprisingly passionate when provoked.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Anne is well aware of Tatiana's investigative nature and fears she might uncover details about Anne's previous apprenticeships at other, less reputable shops, potentially impacting her current standing at Payne Ink.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She has a strained relationship with **Nate "The Steady Hand"**, stemming from a disagreement at a previous studio they both worked at, which involved a controversial design submission.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** What truly happened at Anne's previous shop that she's so desperate to keep hidden, and was she worried Tatiana would pick up on the scent through her investigations into local artists?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Anne" about **hoping for a drama-free night** and that everyone should **focus on the art, not past rumors.**
                    </div>
                </div>

                <!-- Lilly's Card -->
                <div id="card_Lilly" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Lilly "The Phoenix Plagiarist"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Young Apprentice at Payne Ink, Aspiring Designer</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Eager to please, talented, but easily overwhelmed by pressure and desperate for recognition. She once idolized Tatiana Vale and wants nothing more than to be a successful artist.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Tatiana had discovered Lilly submitted a stolen design in a *previous* contest and was planning to expose her during the party. This would have irrevocably ruined Lilly's career.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She's acutely aware of the heightened scrutiny on originality in the contest, partly due to the recent public feuds initiated by **Miranda "The Vlogging Victim"** over design ownership, which added immensely to Lilly's stress.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** She was desperate to avoid exposure and saw Tatiana as a direct, immediate threat to her entire future in the tattoo world. Her panic led to a tragic, unintended outcome.</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Lilly" expressing **immense excitement for the contest** and how much she **admires Tatiana Vale.** Be slightly over-the-top in your praise.
                    </div>
                </div>

                <!-- Aaliyah's Card -->
                <div id="card_Aaliyah" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Aaliyah "The Crocheting Critic"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Party Guest, Aspiring Craft Influencer</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Enthusiastic about her unique craft-art, particularly crochet, but also a bit self-conscious and sensitive to criticism. She dreams of gaining wider recognition for her blend of traditional crafts and modern art.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Aaliyah follows Tatiana's work closely, hoping for a chance to gain exposure for her unique craft-art on the Inkspire Network. She views Tatiana as a gatekeeper to success but also fears her sharp critiques.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She's quietly resentful of **Kailey "The Birthday Artist's"** instant popularity and "flashy" style, feeling her own more nuanced art is overlooked by the mainstream tattoo world.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Was Aaliyah seeking to manipulate Tatiana's opinion for her own gain, or did a fear of negative judgment lead her to a desperate act?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Aaliyah" welcoming everyone and saying you hope **truly unique and overlooked art gets its moment in the spotlight tonight.**
                    </div>
                </div>

                <!-- Lucas's Card -->
                <div id="card_Lucas" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Lucas "The Digital Detective"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Party Guest, Tech Enthusiast / Amateur Hacker</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Curious, resourceful, often seen tinkering with gadgets and interested in digital secrets. Has a reputation for being a bit nosy when it comes to technology and online data.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Lucas is fascinated by internet culture and celebrity, particularly the mechanics of online influence. He sees Tatiana as a master of online information control and wants to understand her methods, perhaps even hoping to learn some "hacks" for his own digital projects.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He was found attempting to access a suspicious device near the crime scene, which he believed might contain vital digital information about *anyone* at the party. He later identifies it as **Miranda "The Vlogging Victim's"** phone.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** What forbidden information was Lucas trying to find on the device, and why was it so urgent that he risked being caught near a murder scene? Was it for personal gain, or did it relate to a larger secret affecting someone specific?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Lucas" about **how fascinating digital footprints are** and how you **hope all the tech is running smoothly tonight.**
                    </div>
                </div>

                <!-- James's Card -->
                <div id="card_James" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: James "The Business Brain"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Shop Sponsor, Local Business Owner</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Professional, image-conscious, and easily frustrated by drama that could negatively impact his brand or investments. He values stability and good public relations above all else.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** James was excited about Tatiana's visit, seeing it as a great PR opportunity for Payne Ink. However, he was also extremely worried about any negative attention or scandals Tatiana might stir up related to the shop's operations or artists.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He had been pressuring **Zak "The Shop Heartthrob"** for weeks to "clean up any loose ends" and ensure the party went off without a hitch, fearing any hint of scandal could damage his substantial investment in Payne Ink.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** How far would James go to protect his investments and the shop's pristine public image from potential scandal initiated by Tatiana, especially if it involved individuals closely tied to the business?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "James" extending a **formal welcome and emphasizing the importance of Payne Ink's stellar reputation.**
                    </div>
                </div>

                <!-- Carter's Card -->
                <div id="card_Carter" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Carter "The Silent Security"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Security Guard Hired for the Party</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Stoic, by-the-book, and prides himself on his observational skills. However, he can sometimes be a little too detached, focusing on procedures over people and missing subtle human elements.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** His primary job was to ensure Tatiana's safety and the smooth running of the event. Her death directly reflects poorly on his professionalism and vigilance, and he fears repercussions.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He had a minor but noticeable disagreement with **Melissa "The Rhythmic Regulator"** earlier, as the loud music from the DJ booth made it difficult for him to monitor the entrance to the ink room effectively.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Was Carter truly oblivious to the murder, or is he deliberately hiding something about what he saw (or didn't see) that night to protect his reputation, or even to cover for someone else's oversight?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a brief, formal message as "Carter" about **ensuring a safe and orderly event.** Maybe mention the importance of **clear lines of sight.**
                    </div>
                </div>

                <!-- Donovan's Card -->
                <div id="card_Donovan" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Donovan "The Eyewitness"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Party Guest, Observant Bystander</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** A bit socially awkward, but highly observant. He tends to notice small, peculiar details that others often miss. He's earnest but might be easily intimidated or hesitant to share everything he knows.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Donovan admires Tatiana's work ethic and journalistic integrity, secretly hoping to catch a glimpse of her "investigative process" firsthand.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He claims he saw someone sneak into the ink room with gloves on, and explicitly states it was "definitely not Zak or Kailey," which raised **Carter's "The Silent Security"** eyebrows, as Carter himself didn't report seeing anyone suspicious.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Who did Donovan see enter the ink room, and why is he being so specific about who it *wasn't*? Is he afraid to name the real person, or does he genuinely only remember fragmented details, perhaps trying to protect someone indirectly?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Donovan" about **how busy the setup for the party is** and that you're **noticing all sorts of things.**
                    </div>
                </div>

                <!-- Miranda's Card -->
                <div id="card_Miranda" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Miranda "The Vlogging Victim"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Local Influencer, Design Contest Finalist (Not the murder victim)</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Controversial, attention-seeking, and often confrontational. She believes in leveraging information and creating drama for views, frequently accusing others of perceived slights or unoriginality.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Miranda respected Tatiana as a fellow media personality and sought to impress her. However, she also saw Tatiana as a potential rival for influence and a potential target for a "shocking expose" of her own.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She was known for public feuds and threats, recently hinting in a vlog at having "leverage" that could "end a career" for "someone here tonight" and ominously stated, "They’ll wish they hadn’t crossed me." This has put **Zak**, **Anne**, and **Kailey** on edge, among others.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Who was Miranda planning to expose with her "leverage," and did her constant stirring of drama put her in danger, even though she wasn't the target of the poisoning? Her information might have put others at risk, and her recent online activity is highly suspicious.</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Miranda" about **how excited you are to reveal your amazing design** and a cryptic hint about **"some people's secrets coming to light."**
                    </div>
                </div>

                <!-- Dante's Card -->
                <div id="card_Dante" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Dante "The Charismatic Client"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Regular Client, Tattoo Enthusiast</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Charming and persuasive, often tries to bend rules or get special treatment. He values quality art but doesn't take criticism well, especially when it's public, viewing it as a personal attack.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Dante had a very public run-in with Tatiana Vale. She had recently posted a scathing review of a tattoo he received from another artist she deemed "subpar," criticizing not just the artist but implicitly his taste and judgment as a collector.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He also has a long-standing, quiet rivalry with **Nate "The Steady Hand"**, arguing over the best techniques for specific styles of realism. He often seeks to prove himself superior.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Did Dante seek revenge for the public humiliation and damage to his "collector" reputation by silencing Tatiana, believing she had overstepped her bounds?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Dante" about **admiring true artistry** and a subtle jab about **"some critics lacking true taste."**
                    </div>
                </div>

                <!-- Nate's Card -->
                <div id="card_Nate" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Nate "The Steady Hand"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Part-Time Tattoo Artist at Payne Ink, Piercing Artist</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Calm, meticulous, and generally well-regarded for his steady work. He respects artistic integrity but believes public criticism should have boundaries, especially when it borders on bullying.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Nate admired Tatiana's influence but strongly disagreed with her "ruthless" expose methods, particularly when they harmed aspiring or lesser-known artists. He was recently heard discussing a "scathing review" by Tatiana that deeply affected a friend's career, and he felt it was a deeply unfair and cruel tactic.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** He has a quiet professional rivalry with **Dante "The Charismatic Client"** regarding realism tattoo techniques, and also harbors a subtle disapproval of **Kailey's "The Birthday Artist"** occasional embrace of trending, less traditional styles for quick fame.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Was Nate driven by a sense of justice or loyalty to other artists to stop Tatiana's harsh critiques, feeling she abused her power?</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Nate" about **looking forward to a night of good craftsmanship** and that **"real art respects its roots, not just trends."**
                    </div>
                </div>

                <!-- Melissa's Card -->
                <div id="card_Melissa" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-yellow-500 mb-6">
                    <h4 class="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">Character Card: Melissa "The Rhythmic Regulator"</h4>
                    <p class="text-lg text-gray-300 mb-1">**Role:** Studio Manager at Payne Ink & Party DJ</p>
                    <p class="text-lg text-gray-300 mb-1">**Personality:** Highly organized and detail-oriented, she keeps the studio running smoothly. On the side, she's a passionate DJ, bringing her organized nature to managing the music and observing the crowd from the booth.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Victim (Tatiana Vale):** Melissa was extremely anxious about Tatiana's visit, not just for the contest, but because she knew Tatiana's reputation for deep dives into shop operations. Melissa had recently discovered a significant, unexplained discrepancy in the **solvent cleaner** inventory – a large amount is missing – and she was terrified Tatiana would uncover this irregularity, making her look incompetent or worse. Her role as DJ meant she had access to the ink room for a moment during a track change and could have slipped in undetected.</p>
                    <p class="text-lg text-gray-300 mb-1">**Connection to Others:** She had a small but public squabble with **Carter "The Silent Security"** about the volume of the music interfering with his ability to monitor the ink room, making her frustrated.</p>
                    <p class="text-lg text-gray-300 mb-4">**Secret/Motive Hint:** Was Melissa desperate to prevent Tatiana from exposing the missing solvent, which could have been linked to illicit activities or simply made her look grossly negligent? Her access and the timing of the murder are highly suspicious.</p>
                    <div class="p-3 bg-gray-800 rounded-lg text-sm text-gray-400 border border-gray-600">
                        <span class="font-bold text-teal-300">Pre-Game Task:</span> Go to the Guestbook and post a message as "Melissa" about **hoping everything runs perfectly tonight** and that you're **"keeping a close eye on all the moving parts, even the inventory!"**
                    </div>
                </div>

            </div>
        </section>

        <!-- Special Message / Hidden Clue Section -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">A Note From the Birthday Stars!</h3>
            <!-- Placeholder for before game start -->
            <div id="specialMessagePlaceholder" class="p-6 rounded-lg bg-gray-700 text-purple-300 text-lg">
                Clues available at game start.
            </div>
            <!-- Actual content, initially hidden -->
            <div id="specialMessageActualContent" class="initial-hidden">
                <p class="text-lg text-gray-300 mb-6 bg-gray-700 p-6 rounded-lg shadow-inner cursor-pointer hover:bg-gray-600 transition duration-300 ease-in-out" onclick="toggleClue('specialMessageClue')">
                    Click here for a special message from Kailey & Zak!
                </p>
                <div id="specialMessageClue" class="hidden-clue bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-purple-500">
                    <p class="text-xl text-white font-medium mb-4">
                        "Hey everyone! So excited you're here. We've poured our hearts into this party, especially the contest. Just a little heads-up though, we heard a rumor about some tension around previous design submissions... hopefully, it's nothing to worry about. Let's just focus on celebrating and having a good time!"
                    </p>
                    <!-- HIDDEN CLUE 1: Reference to "previous design submissions" hinting at plagiarism -->
                    <p class="text-sm text-gray-400">
                        <span class="font-bold text-red-400">Hidden Insight:</span> *The buzz around the shop has been intense. Someone mentioned seeing a familiar phoenix design from the 'Rising Stars' 2022 contest pop up again recently. Odd, right?*
                    </p>
                </div>
            </div>
        </section>

        <!-- Guestbook Section - Now interactive immediately, but with hidden clue -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">Party Guestbook</h3>
            <div id="guestbookContent" class="bg-gray-700 p-6 rounded-lg shadow-lg border-2 border-cyan-500 text-left">
                <div id="authStatus" class="text-sm text-gray-400 mb-4">
                    Authenticating... <span class="loader"></span>
                </div>
                <div class="mb-6 p-4 bg-gray-800 rounded-md">
                    <p class="text-xl text-white font-medium mb-4">Leave a message:</p>
                    <input type="text" id="guestbookName" placeholder="Your Name" tabindex="0" disabled
                           class="w-full px-4 py-2 mb-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-400" maxlength="50">
                    <textarea id="guestbookMessage" placeholder="Your message..." rows="4" tabindex="0" disabled
                              class="w-full px-4 py-2 mb-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-400" maxlength="200"></textarea>
                    <button onclick="addGuestbookEntry()" id="signButton" disabled
                            class="w-full px-6 py-3 bg-teal-600 text-white font-bold rounded-lg shadow-lg hover:bg-teal-700 transition duration-300 ease-in-out transform hover:scale-105">
                        Sign Guestbook <span id="signLoader" class="hidden loader"></span>
                    </button>
                    <p id="guestbookMessageStatus" class="text-sm mt-2 hidden-clue"></p>
                </div>

                <p class="text-xl text-white font-medium mb-4">Recent Entries:</p>
                <ul id="guestbookEntries" class="text-left text-gray-300 space-y-3">
                    <!-- Guestbook entries will be loaded here dynamically from Firestore -->
                    <!-- HIDDEN CLUE 2: Donovan's partial recollection hinting at the gloved person - now with initial-hidden -->
                    <li id="donovanClue" class="bg-gray-800 p-3 rounded-md border-l-4 border-red-500 initial-hidden">
                        <span class="font-semibold text-red-300">Hidden Entry:</span> <span class="text-sm italic text-gray-400">"Just a brief moment, but I distinctly saw a pair of gloved hands near the ink supplies before Tatiana arrived. Very quick."</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- Password Protected Clue Section -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-teal-300 mb-4">Secret Artist's Archive</h3>
            <!-- Placeholder for before game start -->
            <div id="secretArchivePlaceholder" class="p-6 rounded-lg bg-gray-700 text-yellow-300 text-lg">
                Access to the archive is granted at game start.
            </div>
            <!-- Actual content, initially hidden -->
            <div id="secretArchiveActualContent" class="initial-hidden">
                <p class="text-lg text-gray-300 mb-4">
                    Enter the password to access some deeply buried studio notes.
                </p>
                <div class="flex flex-col items-center">
                    <input type="password" id="passwordInput" placeholder="Enter password"
                           class="px-4 py-2 mb-4 rounded-lg bg-gray-700 text-white border border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-400 w-full max-w-xs">
                    <button onclick="checkPassword()"
                            class="px-6 py-3 bg-purple-600 text-white font-bold rounded-lg shadow-lg hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105">
                        Unlock Archive
                    </button>
                </div>
                <div id="secretClue" class="hidden-clue bg-gray-700 p-6 mt-6 rounded-lg shadow-lg border-2 border-yellow-500 text-left">
                    <p class="text-xl text-white font-medium mb-4">Archived Studio Notes & Personal Observations:</p>
                    <ul class="list-disc list-inside text-lg text-gray-300 space-y-3 pl-4">
                        <!-- HIDDEN CLUE 3.1: Solvent Note -->
                        <li class="bg-gray-800 p-3 rounded-md border-l-4 border-yellow-500">
                            <span class="font-semibold text-yellow-300">Studio Policy (circa 2024):</span> "Reminder to staff: Always ensure the ink room's *solvent cleaner* is securely locked away. It's potent and, if misused, could cause severe damage to equipment... or worse, to health. We keep a large supply in the back cabinet."
                            <p class="text-sm italic text-gray-400 mt-2">
                                Confidential Remark: *Some of the newer apprentices don't seem to grasp just how dangerous certain chemicals can be if mixed improperly. Needs stricter oversight.*
                            </p>
                        </li>
                        <!-- HIDDEN CLUE 3.2: Lilly's struggle/mentor's observation -->
                        <li class="bg-gray-800 p-3 rounded-md border-l-4 border-orange-500">
                            <span class="font-semibold text-orange-300">Mentor's Note (Recent):</span> "Lilly's been under a lot of pressure lately. Her initial designs were great, but she hit a wall on her contest piece. Then, suddenly, she had this *perfect* phoenix. Too perfect, almost. I hope she's not letting the pressure get to her in unhealthy ways."
                        </li>
                        <!-- HIDDEN CLUE 3.3: Tatiana's exposé methods -->
                        <li class="bg-gray-800 p-3 rounded-md border-l-4 border-red-500">
                            <span class="font-semibold text-red-300">Anonymous Observation:</span> "Tatiana Vale is ruthless. I heard she's already found someone here who's been passing off stolen work as their own. She prides herself on 'unmasking' fakes. It's only a matter of time before she makes a big announcement. Hope it doesn't sink the shop."
                        </li>
                    </ul>
                </div>
                <p id="passwordError" class="text-red-500 mt-4 hidden-clue">Incorrect password. Please try again.</p>
            </div>
        </section>

        <!-- Game Master Bypass Section -->
        <section class="mb-10 text-center">
            <h3 class="text-2xl md:text-3xl font-bold text-red-400 mb-4">Game Master Bypass</h3>
            <p class="text-lg text-gray-300 mb-4">
                Game Masters: Enter code to reveal clues early.
            </p>
            <div class="flex flex-col items-center">
                <input type="password" id="gmPasswordInput" placeholder="GM Code"
                       class="px-4 py-2 mb-4 rounded-lg bg-gray-700 text-white border border-red-500 focus:outline-none focus:ring-2 focus:ring-red-400 w-full max-w-xs">
                <button onclick="checkGameMasterPassword()"
                        class="px-6 py-3 bg-red-600 text-white font-bold rounded-lg shadow-lg hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105">
                    Reveal Clues (GM Only)
                </button>
            </div>
            <p id="gmPasswordError" class="text-red-500 mt-4 hidden-clue">Incorrect GM code.</p>
        </section>


        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mt-8">
            &copy; 2025 Payne Ink. All rights reserved. Let the ink flow!
        </footer>
    </div>

    <!-- Firebase SDK Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables for Firebase instances and user info
        let app;
        let db;
        let auth;
        let currentUserId = 'anonymous'; // Default to anonymous

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyChmZqtLFuQxjIGr1GTegKvEnCd9Vb-Bh8",
          authDomain: "payneinkparty.firebaseapp.com",
          projectId: "payneinkparty",
          storageBucket: "payneinkparty.firebasestorage.app",
          messagingSenderId: "342987145129",
          appId: "1:342987145129:web:032c93d9a24fd3b7140eb8"
        };
        // For GitHub Pages, `appId` will be the project ID from your firebaseConfig.
        const appId = firebaseConfig.projectId;
        // No initial token needed, signInAnonymously will handle it for public access.
        const initialAuthToken = null;

        // Character Card Passwords (Internal to the script)
        const characterPasswords = {
            "KAILEY": "card_Kailey",
            "ZAK": "card_Zak",
            "ANNE": "card_Anne",
            "LILLY": "card_Lilly",
            "MIKUMIKUBEAM": "card_Aaliyah", // Updated Aaliyah's password
            "LUCAS": "card_Lucas",
            "JAMES": "card_James",
            "CARTER": "card_Carter",
            "DONOVAN": "card_Donovan",
            "MIRANDA": "card_Miranda",
            "DANTE": "card_Dante",
            "NATE": "card_Nate",
            "MELISSA": "card_Melissa"
        };


        /**
         * Initializes Firebase and authenticates the user.
         * Sets up real-time listener for guestbook entries.
         */
        async function initializeFirebaseAndAuth() {
            try {
                // Initialize Firebase app if not already initialized
                if (!app) {
                    app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);
                }

                // Get guestbook elements
                const authStatusElement = document.getElementById('authStatus');
                const nameInput = document.getElementById('guestbookName');
                const messageInput = document.getElementById('guestbookMessage');
                const signButton = document.getElementById('signButton');


                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                    console.log("Signed in with custom token.");
                } else {
                    await signInAnonymously(auth);
                    console.log("Signed in anonymously.");
                }

                // Listen for auth state changes to get current user ID
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        currentUserId = user.uid;
                        authStatusElement.innerHTML = `Authenticated as: <span class="font-bold text-teal-300">${currentUserId}</span>`;
                        // Enable inputs and button once authenticated
                        nameInput.disabled = false;
                        messageInput.disabled = false;
                        signButton.disabled = false;
                        listenForGuestbookEntries(); // Start listening for guestbook entries
                    } else {
                        // This case generally means anonymous sign-in failed or user signed out.
                        // For this app, we always want anonymous access if not a custom token user.
                        currentUserId = crypto.randomUUID(); // Fallback to a temp ID for display
                        authStatusElement.innerHTML = `<span class="text-red-500">Authentication Failed. Using a temporary ID.</span>`;
                        console.error("Anonymous authentication failed or user signed out.");
                        // Keep inputs/button disabled as writing won't work without proper auth
                        nameInput.disabled = true;
                        messageInput.disabled = true;
                        signButton.disabled = true;
                        // Still try to listen for reads, though writes will fail
                        listenForGuestbookEntries();
                    }
                    authStatusElement.querySelector('.loader')?.classList.add('hidden'); // Hide loader once authenticated
                });

            } catch (error) {
                console.error("Error initializing Firebase or authenticating:", error);
                const authStatusElement = document.getElementById('authStatus');
                const nameInput = document.getElementById('guestbookName');
                const messageInput = document.getElementById('guestbookMessage');
                const signButton = document.getElementById('signButton');

                authStatusElement.innerHTML = `<span class="text-red-500">Auth Error: ${error.message}</span>`;
                authStatusElement.querySelector('.loader')?.classList.add('hidden');
                // Ensure inputs/button are disabled on error
                nameInput.disabled = true;
                messageInput.disabled = true;
                signButton.disabled = true;
            }
        }

        /**
         * Adds a new entry to the Firestore guestbook collection.
         */
        window.addGuestbookEntry = async function() {
            const nameInput = document.getElementById('guestbookName');
            const messageInput = document.getElementById('guestbookMessage');
            const statusElement = document.getElementById('guestbookMessageStatus');
            const signButton = document.getElementById('signButton');
            const signLoader = document.getElementById('signLoader');

            const name = nameInput.value.trim();
            const message = messageInput.value.trim();

            if (!name || !message) {
                statusElement.textContent = "Please enter both your name and a message.";
                statusElement.classList.remove('hidden-clue', 'text-green-500');
                statusElement.classList.add('text-red-500');
                return;
            }

            // Disable button and show loader
            signButton.disabled = true;
            signLoader.classList.remove('hidden');
            statusElement.classList.add('hidden-clue'); // Hide previous status

            try {
                // Ensure auth is ready before attempting Firestore operation
                if (!auth || !auth.currentUser) {
                    console.error("Firebase Auth not ready. Cannot add guestbook entry.");
                    statusElement.textContent = "Authentication not ready. Please wait and try again.";
                    statusElement.classList.remove('hidden-clue', 'text-green-500');
                    statusElement.classList.add('text-red-500');
                    return;
                }

                // Public collection path for guestbook entries
                const guestbookCollectionRef = collection(db, `artifacts/${appId}/public/data/guestbook`);

                await addDoc(guestbookCollectionRef, {
                    name: name,
                    message: message,
                    userId: currentUserId, // Store the user ID for reference
                    timestamp: serverTimestamp() // Firestore timestamp
                });

                nameInput.value = ''; // Clear input fields
                messageInput.value = '';
                statusElement.textContent = "Message added successfully!";
                statusElement.classList.remove('hidden-clue', 'text-red-500');
                statusElement.classList.add('text-green-500');
            } catch (e) {
                console.error("Error adding document: ", e);
                statusElement.textContent = `Error adding message: ${e.message}`;
                statusElement.classList.remove('hidden-clue', 'text-green-500');
                statusElement.classList.add('text-red-500');
            } finally {
                signButton.disabled = false;
                signLoader.classList.add('hidden');
            }
        };

        /**
         * Listens for real-time updates to guestbook entries and displays them.
         */
        function listenForGuestbookEntries() {
            const guestbookEntriesList = document.getElementById('guestbookEntries');
            const donovanClue = document.getElementById('donovanClue'); // Get the specific clue element

            // Create a query against the collection, ordered by timestamp
            const q = query(collection(db, `artifacts/${appId}/public/data/guestbook`), orderBy("timestamp", "desc"));

            onSnapshot(q, (snapshot) => {
                // Clear all existing entries except the static Donovan clue placeholder
                // First, remove all dynamic entries
                const currentEntries = Array.from(guestbookEntriesList.children);
                currentEntries.forEach(child => {
                    if (child.id !== 'donovanClue') { // Only remove if it's not the static Donovan clue
                        guestbookEntriesList.removeChild(child);
                    }
                });

                snapshot.forEach((doc) => {
                    const entry = doc.data();
                    const li = document.createElement('li');
                    li.classList.add('bg-gray-800', 'p-3', 'rounded-md', 'border-l-4', 'border-blue-500'); // Use blue for user entries
                    const timestamp = entry.timestamp ? new Date(entry.timestamp.seconds * 1000).toLocaleString() : 'N/A';
                    li.innerHTML = `
                        <span class="font-semibold text-blue-300">${entry.name}</span>
                        <span class="text-xs text-gray-500"> (${timestamp})</span>:<br>
                        ${entry.message}
                    `;
                    // Insert new entries *before* the Donovan clue if it exists, otherwise at the top
                    if (donovanClue) {
                        guestbookEntriesList.insertBefore(li, donovanClue);
                    } else {
                        guestbookEntriesList.prepend(li);
                    }
                });
            }, (error) => {
                console.error("Error fetching guestbook entries:", error);
                const statusElement = document.getElementById('guestbookMessageStatus');
                if (statusElement) {
                    statusElement.textContent = `Failed to load entries: ${error.message}`;
                    statusElement.classList.remove('hidden-clue', 'text-green-500');
                    statusElement.classList.add('text-red-500');
                }
            });
        }

        // Countdown Logic
        const countdownDate = new Date("June 21, 2025 19:00:00").getTime(); // June 21st, 2025, 7:00 PM (19:00 military time)

        const countdownDisplay = document.getElementById('countdownDisplay');
        const countdownContainer = document.getElementById('countdownContainer');

        const specialMessagePlaceholder = document.getElementById('specialMessagePlaceholder');
        const specialMessageActualContent = document.getElementById('specialMessageActualContent');

        const secretArchivePlaceholder = document.getElementById('secretArchivePlaceholder');
        const secretArchiveActualContent = document.getElementById('secretArchiveActualContent');

        const donovanClue = document.getElementById('donovanClue'); // Get the specific Donovan clue


        let countdownInterval; // To store the interval ID

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            if (distance < 0) {
                clearInterval(countdownInterval);
                countdownContainer.innerHTML = '<h3 class="text-3xl md:text-4xl font-bold text-teal-300 mb-4">The Party Has Begun!</h3><p class="text-2xl font-semibold text-white glow-text">Let the Mystery Unfold!</p>';
                revealAllClues();
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            countdownDisplay.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }

        function revealAllClues() {
            // Hide all placeholders
            specialMessagePlaceholder.classList.add('hidden-clue');
            secretArchivePlaceholder.classList.add('hidden-clue');

            // Show all actual content sections
            specialMessageActualContent.classList.remove('initial-hidden');
            secretArchiveActualContent.classList.remove('initial-hidden');

            // Reveal the specific Donovan clue within the guestbook
            if (donovanClue) {
                donovanClue.classList.remove('initial-hidden');
            }
        }

        // Universal window.onload handler
        window.onload = function() {
            // Initial check and start countdown
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);

            // Initialize Firebase and auth immediately since guestbook is active from start
            initializeFirebaseAndAuth();
        };

        // General JS for toggling other clues
        window.toggleClue = function(id) {
            const element = document.getElementById(id);
            if (element.classList.contains('hidden-clue')) {
                element.classList.remove('hidden-clue');
                element.classList.add('visible-clue');
            } else {
                element.classList.remove('visible-clue');
                element.classList.add('hidden-clue');
            }
        };

        // Function to check the password for the secret archive
        window.checkPassword = function() {
            const passwordInput = document.getElementById('passwordInput');
            const secretClue = document.getElementById('secretClue');
            const passwordError = document.getElementById('passwordError');
            const correctPassword = "INKED"; // The secret password

            if (passwordInput.value.toUpperCase() === correctPassword) {
                secretClue.classList.remove('hidden-clue');
                secretClue.classList.add('visible-clue');
                passwordError.classList.add('hidden-clue'); // Hide error if successful
            } else {
                secretClue.classList.add('hidden-clue'); // Hide clue if incorrect
                secretClue.classList.remove('visible-clue');
                passwordError.classList.remove('hidden-clue'); // Show error
            }
        };

        // Game Master Bypass function
        window.checkGameMasterPassword = function() {
            const gmPasswordInput = document.getElementById('gmPasswordInput');
            const gmPasswordError = document.getElementById('gmPasswordError');
            const correctGmPassword = "JUDGE"; // Game Master password

            if (gmPasswordInput.value.toUpperCase() === correctGmPassword) {
                clearInterval(countdownInterval); // Stop the countdown
                countdownContainer.innerHTML = '<h3 class="text-3xl md:text-4xl font-bold text-teal-300 mb-4">GM Override Active!</h3><p class="text-2xl font-semibold text-white glow-text">Clues Revealed!</p>';
                revealAllClues(); // Reveal all clues
                gmPasswordError.classList.add('hidden-clue'); // Hide error
            } else {
                gmPasswordError.classList.remove('hidden-clue'); // Show error
            }
        };

        // Function to unlock character cards
        window.unlockCharacterCard = function() {
            const charPasswordInput = document.getElementById('characterPasswordInput');
            const charPasswordError = document.getElementById('characterPasswordError');
            const enteredPassword = charPasswordInput.value.toUpperCase();

            // Hide any previously revealed cards
            const allCharacterCards = document.querySelectorAll('#characterCardsContainer > div');
            allCharacterCards.forEach(card => {
                card.classList.add('hidden-clue');
            });

            let cardUnlocked = false;
            for (const password in characterPasswords) {
                if (enteredPassword === password) {
                    const cardId = characterPasswords[password];
                    document.getElementById(cardId).classList.remove('hidden-clue');
                    charPasswordError.classList.add('hidden-clue'); // Hide error if successful
                    charPasswordInput.value = ''; // Clear input
                    cardUnlocked = true;
                    break; // Stop after finding the correct card
                }
            }

            if (!cardUnlocked) {
                charPasswordError.classList.remove('hidden-clue'); // Show error
            }
        };
    </script>
</body>
</html>
